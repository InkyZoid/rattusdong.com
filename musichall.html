<html>

<head>
  <title>RattusDong Hub</title>

  <link rel="icon" href="https://raw.githubusercontent.com/RattusDong/rattusdong.com/main/assets/mario%20irl%20transparent.png">

  <link rel="stylesheet" href="styles.css?v=18">
</head>

<body>
  <div>
    <!-- prev song -->
    <p onclick="indexer(-1)" class="buttonS"> &lt </p>
    <!-- song title -->
    <p id="title" class="title"> </p>
    <!-- next song -->
    <p onclick="indexer(1)" class="buttonS"> &gt </p>
  </div>
  <!-- playbutton -->
  <p onclick="togglePlay()" id="playpause" class="playpause"> ⏵︎ </p> <br>
  <!-- duration as text -->
  <p id="durationText" class="durationText"> </p>

  <!-- audio play that actually does the stuff, always hidden -->
  <audio controls id="player" src="" style="display:none;" alt="Audio not found :("> width</audio>

</body>

<script> 
document.addEventListener("DOMContentLoaded", onPageLoad);

//tracks current song
let index = 0;

//array for song files
let song = [
"assets/music/The Kingdom of Rattus.mp3",
"assets/music/Rattus Church Good.mp3",
"assets/music/Rattus Church Evil.mp3"
];

//array for song titles
let songnames = [
"(1) The Kingdom of Rattus", 
"(2) The Holy Church of Rattus",
"(2.2) The True Church of Rattus"
];

//elements
const songPlayer = document.getElementById("player");
const songTitle = document.getElementById("title");
const playpause = document.getElementById("playpause");
const durationText = document.getElementById("durationText");

//load page
function onPageLoad() {
  change();
}

//change song index
function indexer(num) {
  index += num;
  if (index > song.length - 1) {
    index = 0;
  }
  else if (index < 0) {
    index = song.length - 1;
  }
  change();
}

//change current song to index
function change() {
  songTitle.textContent = songnames[index];
  songPlayer.src = song[index];
  playPauseButton.textContent = "⏵︎";
}

//play/pause on click play button
function togglePlay() {
      if (songPlayer.paused) {
        songPlayer.play();
        playpause.textContent = "⏸︎";
      } else {
        songPlayer.pause();
        playpause.textContent = "⏵︎";
      }
}   

//update text duration
songPlayer.addEventListener("timeupdate", () => {
const currentTime = songPlayer.currentTime;
const minutes = Math.floor(currentTime / 60);
const seconds = Math.floor(currentTime % 60).toString().padStart(2, '0');
durationText.textContent = `${minutes}:${seconds}`;
});

</script>

</html>
